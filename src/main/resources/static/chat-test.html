<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>WebSocket 테스트</title>
  <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>
</head>
<body>
<h2>WebSocket 테스트</h2>
<button onclick="connect()">Connect</button>
<button onclick="sendMessage()">Send Message</button>

<script>
  let stompClient = null;

  function connect() {
      const socket = new SockJS('http://localhost:8080/ws');
      stompClient = Stomp.over(socket);

      stompClient.connect({}, function (frame) {
          console.log('Connected: ' + frame);
          stompClient.subscribe('/topic/chat-room-123', function (message) {
              alert('받은 메시지: ' + message.body);
          });
      });
  }

  function sendMessage() {
      stompClient.send("/app/chat.sendMessage", {}, JSON.stringify({
          roomId: "123",
          sender: "tester",
          content: "Hello, Kafka + WebSocket!"
      }));
  }
</script>
</body>
</html>
